<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EcoTrack - Personal Carbon Footprint Tracker</title>
    <meta name="description" content="Track and reduce your daily carbon footprint with EcoTrack. Built for the KWC community.">
    <link rel="stylesheet" href="css/variables.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <nav class="sidebar">
            <div class="logo">
                <div class="logo-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                        <path d="M2 12h20"/>
                    </svg>
                </div>
                <span class="logo-text">EcoTrack</span>
            </div>
            <ul class="nav-menu">
                <li class="nav-item active" data-page="dashboard">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"/>
                        <rect x="14" y="3" width="7" height="7"/>
                        <rect x="14" y="14" width="7" height="7"/>
                        <rect x="3" y="14" width="7" height="7"/>
                    </svg>
                    <span>Dashboard</span>
                </li>
                <li class="nav-item" data-page="log">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"/>
                        <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    <span>Log Activity</span>
                </li>
                <li class="nav-item" data-page="insights">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/>
                        <polyline points="3.27 6.96 12 12.01 20.73 6.96"/>
                        <line x1="12" y1="22.08" x2="12" y2="12"/>
                    </svg>
                    <span>Insights</span>
                </li>
                <li class="nav-item" data-page="local">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"/>
                        <circle cx="12" cy="10" r="3"/>
                    </svg>
                    <span>KWC Resources</span>
                </li>
                <li class="nav-item" data-page="goals">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <circle cx="12" cy="12" r="6"/>
                        <circle cx="12" cy="12" r="2"/>
                    </svg>
                    <span>Goals</span>
                </li>
            </ul>
            <div class="sidebar-footer">
                <p>Region Hacks 2025</p>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Dashboard Page -->
            <section id="dashboard" class="page active">
                <header class="page-header">
                    <div class="header-content">
                        <h1>Carbon Dashboard</h1>
                        <p class="subtitle" id="current-date"></p>
                    </div>
                </header>

                <div class="stats-grid">
                    <div class="stat-card primary">
                        <div class="stat-header">
                            <span class="stat-label">Today's Footprint</span>
                            <div class="stat-icon-small">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 2L2 7l10 5 10-5-10-5z"/>
                                    <path d="M2 17l10 5 10-5"/>
                                    <path d="M2 12l10 5 10-5"/>
                                </svg>
                            </div>
                        </div>
                        <p class="stat-value" id="today-total">0.0</p>
                        <span class="stat-unit">kg CO2</span>
                        <div class="stat-change positive" id="daily-change">
                            <span>--</span>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-label">Transportation</span>
                        </div>
                        <p class="stat-value" id="transport-total">0.0</p>
                        <span class="stat-unit">kg CO2</span>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-label">Food</span>
                        </div>
                        <p class="stat-value" id="food-total">0.0</p>
                        <span class="stat-unit">kg CO2</span>
                    </div>

                    <div class="stat-card">
                        <div class="stat-header">
                            <span class="stat-label">Energy</span>
                        </div>
                        <p class="stat-value" id="energy-total">0.0</p>
                        <span class="stat-unit">kg CO2</span>
                    </div>
                </div>

                <div class="charts-row">
                    <div class="chart-card">
                        <h3>Weekly Trend</h3>
                        <div class="chart-wrapper">
                            <canvas id="weekly-chart"></canvas>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3>Category Breakdown</h3>
                        <div class="chart-wrapper">
                            <canvas id="category-chart"></canvas>
                        </div>
                    </div>
                </div>

                <div class="impact-card">
                    <h3>Your Environmental Impact</h3>
                    <div class="impact-grid">
                        <div class="impact-item">
                            <span class="impact-value" id="trees-equivalent">0</span>
                            <span class="impact-label">Trees needed to offset monthly emissions</span>
                        </div>
                        <div class="impact-item">
                            <span class="impact-value" id="car-km">0</span>
                            <span class="impact-label">Equivalent km driven by car</span>
                        </div>
                        <div class="impact-item">
                            <span class="impact-value" id="kwc-comparison">--</span>
                            <span class="impact-label">vs KWC regional average</span>
                        </div>
                    </div>
                </div>

                <!-- 3D Earth Visualization -->
                <div class="earth-card">
                    <h3>Global Impact Visualization</h3>
                    <div id="earth-container"></div>
                    <p class="earth-caption">Your actions contribute to a healthier planet</p>
                </div>
            </section>

            <!-- Log Activity Page -->
            <section id="log" class="page">
                <header class="page-header">
                    <h1>Log Activity</h1>
                    <p class="subtitle">Track your daily carbon emissions by category</p>
                </header>

                <div class="log-section">
                    <div class="log-category">
                        <div class="category-header">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="1" y="3" width="15" height="13"/>
                                <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/>
                                <circle cx="5.5" cy="18.5" r="2.5"/>
                                <circle cx="18.5" cy="18.5" r="2.5"/>
                            </svg>
                            <h3>Transportation</h3>
                        </div>
                        <div class="log-buttons">
                            <button class="log-btn" data-category="transport" data-type="car" data-carbon="2.3">
                                <span class="btn-title">Car (10km)</span>
                                <span class="btn-carbon">+2.3 kg</span>
                            </button>
                            <button class="log-btn" data-category="transport" data-type="bus" data-carbon="0.8">
                                <span class="btn-title">Bus (10km)</span>
                                <span class="btn-carbon">+0.8 kg</span>
                            </button>
                            <button class="log-btn eco" data-category="transport" data-type="bike" data-carbon="0">
                                <span class="btn-title">Bicycle</span>
                                <span class="btn-carbon">0 kg</span>
                            </button>
                            <button class="log-btn eco" data-category="transport" data-type="walk" data-carbon="0">
                                <span class="btn-title">Walking</span>
                                <span class="btn-carbon">0 kg</span>
                            </button>
                        </div>
                    </div>

                    <div class="log-category">
                        <div class="category-header">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M18 8h1a4 4 0 0 1 0 8h-1"/>
                                <path d="M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"/>
                                <line x1="6" y1="1" x2="6" y2="4"/>
                                <line x1="10" y1="1" x2="10" y2="4"/>
                                <line x1="14" y1="1" x2="14" y2="4"/>
                            </svg>
                            <h3>Food and Diet</h3>
                        </div>
                        <div class="log-buttons">
                            <button class="log-btn high" data-category="food" data-type="beef" data-carbon="6.5">
                                <span class="btn-title">Beef Meal</span>
                                <span class="btn-carbon">+6.5 kg</span>
                            </button>
                            <button class="log-btn" data-category="food" data-type="chicken" data-carbon="1.8">
                                <span class="btn-title">Chicken Meal</span>
                                <span class="btn-carbon">+1.8 kg</span>
                            </button>
                            <button class="log-btn eco" data-category="food" data-type="vegetarian" data-carbon="0.5">
                                <span class="btn-title">Vegetarian</span>
                                <span class="btn-carbon">+0.5 kg</span>
                            </button>
                            <button class="log-btn eco" data-category="food" data-type="vegan" data-carbon="0.3">
                                <span class="btn-title">Vegan</span>
                                <span class="btn-carbon">+0.3 kg</span>
                            </button>
                        </div>
                    </div>

                    <div class="log-category">
                        <div class="category-header">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/>
                            </svg>
                            <h3>Home Energy</h3>
                        </div>
                        <div class="log-buttons">
                            <button class="log-btn" data-category="energy" data-type="ac" data-carbon="1.5">
                                <span class="btn-title">AC (1 hour)</span>
                                <span class="btn-carbon">+1.5 kg</span>
                            </button>
                            <button class="log-btn" data-category="energy" data-type="heating" data-carbon="2.0">
                                <span class="btn-title">Heating (1 hour)</span>
                                <span class="btn-carbon">+2.0 kg</span>
                            </button>
                            <button class="log-btn" data-category="energy" data-type="laundry" data-carbon="0.6">
                                <span class="btn-title">Laundry Load</span>
                                <span class="btn-carbon">+0.6 kg</span>
                            </button>
                            <button class="log-btn eco" data-category="energy" data-type="solar" data-carbon="-0.5">
                                <span class="btn-title">Solar Energy</span>
                                <span class="btn-carbon">-0.5 kg</span>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="recent-activity">
                    <h3>Recent Activity</h3>
                    <div class="activity-list" id="activity-list">
                        <p class="empty-state">No activities logged yet. Start tracking above.</p>
                    </div>
                </div>
            </section>

            <!-- Insights Page -->
            <section id="insights" class="page">
                <header class="page-header">
                    <h1>Insights</h1>
                    <p class="subtitle">Personalized recommendations based on your data</p>
                </header>

                <div class="insights-container">
                    <div class="insight-card">
                        <div class="insight-header">
                            <h4>Transportation Analysis</h4>
                            <span class="insight-badge" id="transport-badge">--</span>
                        </div>
                        <p id="transport-insight">Log some activities to see personalized insights about your transportation habits.</p>
                    </div>

                    <div class="insight-card">
                        <div class="insight-header">
                            <h4>Diet Impact</h4>
                            <span class="insight-badge" id="food-badge">--</span>
                        </div>
                        <p id="food-insight">Track your meals to understand how your diet affects your carbon footprint.</p>
                    </div>

                    <div class="insight-card">
                        <div class="insight-header">
                            <h4>Energy Usage</h4>
                            <span class="insight-badge" id="energy-badge">--</span>
                        </div>
                        <p id="energy-insight">Monitor your home energy consumption to find opportunities for reduction.</p>
                    </div>

                    <div class="insight-card highlight">
                        <div class="insight-header">
                            <h4>Top Recommendation</h4>
                        </div>
                        <p id="top-recommendation">Start logging your daily activities to receive personalized recommendations for reducing your carbon footprint.</p>
                    </div>
                </div>

                <div class="tips-section">
                    <h3>General Tips for Reducing Carbon Footprint</h3>
                    <div class="tips-grid">
                        <div class="tip-card">
                            <h4>Use Public Transit</h4>
                            <p>Taking the GRT bus instead of driving saves approximately 1.5 kg CO2 per 10km trip.</p>
                            <span class="tip-impact">Potential savings: 40+ kg CO2/month</span>
                        </div>
                        <div class="tip-card">
                            <h4>Reduce Meat Consumption</h4>
                            <p>Replacing one beef meal per week with a plant-based alternative can significantly reduce your footprint.</p>
                            <span class="tip-impact">Potential savings: 25+ kg CO2/month</span>
                        </div>
                        <div class="tip-card">
                            <h4>Optimize Home Energy</h4>
                            <p>Lowering your thermostat by 1 degree Celsius can reduce heating emissions by up to 10%.</p>
                            <span class="tip-impact">Potential savings: 30+ kg CO2/month</span>
                        </div>
                        <div class="tip-card">
                            <h4>Buy Local Produce</h4>
                            <p>Shopping at the Kitchener Market reduces transportation emissions from food delivery.</p>
                            <span class="tip-impact">Potential savings: 15+ kg CO2/month</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- KWC Local Resources Page -->
            <section id="local" class="page">
                <header class="page-header">
                    <h1>KWC Local Resources</h1>
                    <p class="subtitle">Eco-friendly resources in the Kitchener-Waterloo-Cambridge region</p>
                </header>

                <div class="comparison-section">
                    <div class="comparison-card user">
                        <span class="comparison-label">Your Daily Average</span>
                        <span class="comparison-value" id="user-daily-avg">0.0</span>
                        <span class="comparison-unit">kg CO2/day</span>
                    </div>
                    <div class="comparison-divider">
                        <span>vs</span>
                    </div>
                    <div class="comparison-card regional">
                        <span class="comparison-label">KWC Regional Average</span>
                        <span class="comparison-value">14.2</span>
                        <span class="comparison-unit">kg CO2/day</span>
                    </div>
                </div>

                <div class="resources-section">
                    <h3>Local Eco-Friendly Resources</h3>
                    <div class="resources-grid">
                        <a href="https://www.grt.ca" target="_blank" rel="noopener" class="resource-card">
                            <div class="resource-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <rect x="1" y="3" width="15" height="13"/>
                                    <polygon points="16 8 20 8 23 11 23 16 16 16 16 8"/>
                                    <circle cx="5.5" cy="18.5" r="2.5"/>
                                    <circle cx="18.5" cy="18.5" r="2.5"/>
                                </svg>
                            </div>
                            <h4>Grand River Transit</h4>
                            <p>Public transit across KWC region. Save 1.5 kg CO2 per trip compared to driving.</p>
                            <span class="resource-link">Visit GRT Website</span>
                        </a>

                        <a href="https://www.kitchenermarket.ca" target="_blank" rel="noopener" class="resource-card">
                            <div class="resource-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="9" cy="21" r="1"/>
                                    <circle cx="20" cy="21" r="1"/>
                                    <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                                </svg>
                            </div>
                            <h4>Kitchener Market</h4>
                            <p>Local farmers market with fresh produce. Zero transportation emissions from local food.</p>
                            <span class="resource-link">Explore Market</span>
                        </a>

                        <a href="https://www.regionofwaterloo.ca/en/exploring-the-region/cycling-and-trails.aspx" target="_blank" rel="noopener" class="resource-card">
                            <div class="resource-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="18.5" cy="18.5" r="3.5"/>
                                    <circle cx="5.5" cy="18.5" r="3.5"/>
                                    <path d="M15 5a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                                    <path d="M5.5 18.5L9 12l4 2 4-6"/>
                                </svg>
                            </div>
                            <h4>Iron Horse Trail</h4>
                            <p>24km multi-use trail connecting Kitchener to Waterloo. Perfect for zero-emission commuting.</p>
                            <span class="resource-link">View Trail Map</span>
                        </a>

                        <a href="https://www.regionofwaterloo.ca/en/living-here/recycling.aspx" target="_blank" rel="noopener" class="resource-card">
                            <div class="resource-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="23 4 23 10 17 10"/>
                                    <polyline points="1 20 1 14 7 14"/>
                                    <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
                                </svg>
                            </div>
                            <h4>Region Recycling Program</h4>
                            <p>Proper recycling reduces landfill emissions by up to 70%. Check what can be recycled.</p>
                            <span class="resource-link">Recycling Guide</span>
                        </a>
                    </div>
                </div>

                <div class="local-facts">
                    <h3>KWC Environmental Facts</h3>
                    <ul class="facts-list">
                        <li>The Region of Waterloo has committed to reducing community greenhouse gas emissions by 80% by 2050.</li>
                        <li>GRT serves over 70,000 riders daily, preventing thousands of car trips.</li>
                        <li>The region has over 100km of dedicated cycling infrastructure.</li>
                        <li>Local food from the Kitchener Market travels an average of 50km compared to 2,500km for supermarket produce.</li>
                    </ul>
                </div>
            </section>

            <!-- Goals Page -->
            <section id="goals" class="page">
                <header class="page-header">
                    <h1>Goals and Challenges</h1>
                    <p class="subtitle">Set targets and track your progress</p>
                </header>

                <div class="goals-section">
                    <h3>Weekly Challenges</h3>
                    <div class="challenges-grid">
                        <div class="challenge-card" id="challenge-transport">
                            <div class="challenge-header">
                                <h4>Green Commuter</h4>
                                <span class="challenge-status">In Progress</span>
                            </div>
                            <p>Use eco-friendly transportation 5 times this week</p>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="transport-progress" style="width: 0%"></div>
                                </div>
                                <span class="progress-text" id="transport-progress-text">0/5 trips</span>
                            </div>
                        </div>

                        <div class="challenge-card" id="challenge-food">
                            <div class="challenge-header">
                                <h4>Plant-Based Days</h4>
                                <span class="challenge-status">In Progress</span>
                            </div>
                            <p>Choose vegetarian or vegan meals 7 times</p>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="food-progress" style="width: 0%"></div>
                                </div>
                                <span class="progress-text" id="food-progress-text">0/7 meals</span>
                            </div>
                        </div>

                        <div class="challenge-card" id="challenge-overall">
                            <div class="challenge-header">
                                <h4>Carbon Reducer</h4>
                                <span class="challenge-status">In Progress</span>
                            </div>
                            <p>Stay under 10 kg CO2 daily average this week</p>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="overall-progress" style="width: 0%"></div>
                                </div>
                                <span class="progress-text" id="overall-progress-text">-- kg avg</span>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="leaderboard-section">
                    <h3>Community Leaderboard - KWC Region</h3>
                    <div class="leaderboard">
                        <div class="leaderboard-item rank-1">
                            <span class="rank">1</span>
                            <span class="username">EcoWarrior_KW</span>
                            <span class="score">2,450 pts</span>
                        </div>
                        <div class="leaderboard-item rank-2">
                            <span class="rank">2</span>
                            <span class="username">GreenCambridge</span>
                            <span class="score">2,180 pts</span>
                        </div>
                        <div class="leaderboard-item rank-3">
                            <span class="rank">3</span>
                            <span class="username">WaterlooEco</span>
                            <span class="score">1,920 pts</span>
                        </div>
                        <div class="leaderboard-item current-user">
                            <span class="rank" id="user-rank">--</span>
                            <span class="username">You</span>
                            <span class="score" id="user-score">0 pts</span>
                        </div>
                    </div>
                </div>

                <div class="achievements-section">
                    <h3>Achievements</h3>
                    <div class="achievements-grid">
                        <div class="achievement unlocked" id="ach-first">
                            <div class="achievement-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                                    <polyline points="22 4 12 14.01 9 11.01"/>
                                </svg>
                            </div>
                            <span class="achievement-name">First Step</span>
                            <span class="achievement-desc">Log your first activity</span>
                        </div>
                        <div class="achievement" id="ach-cyclist">
                            <div class="achievement-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="18.5" cy="18.5" r="3.5"/>
                                    <circle cx="5.5" cy="18.5" r="3.5"/>
                                    <path d="M15 5a1 1 0 1 0 0-2 1 1 0 0 0 0 2z"/>
                                    <path d="M5.5 18.5L9 12l4 2 4-6"/>
                                </svg>
                            </div>
                            <span class="achievement-name">Cycle Champion</span>
                            <span class="achievement-desc">Bike 10 times</span>
                        </div>
                        <div class="achievement" id="ach-plant">
                            <div class="achievement-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M12 22V8"/>
                                    <path d="M5 12H2a10 10 0 0 0 10-10v0a10 10 0 0 0 10 10h-3"/>
                                    <path d="M5 12a7 7 0 0 0 7 7"/>
                                    <path d="M19 12a7 7 0 0 1-7 7"/>
                                </svg>
                            </div>
                            <span class="achievement-name">Plant Powered</span>
                            <span class="achievement-desc">15 plant-based meals</span>
                        </div>
                        <div class="achievement" id="ach-saver">
                            <div class="achievement-icon">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                                </svg>
                            </div>
                            <span class="achievement-name">Carbon Saver</span>
                            <span class="achievement-desc">Save 50 kg CO2</span>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <script src="js/utils.js"></script>
    <script src="js/storage.js"></script>
    <script src="js/carbon.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/earth.js"></script>
    <script src="js/export.js"></script>
    <script src="app.js"></script>
</body>
</html>
